{"version":3,"mappings":"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","names":[],"ignoreList":[0],"sources":["../../node_modules/media-captions/dist/prod/ssa-parser.js"],"sourcesContent":["import { b as VTTCue, p as parseVTTTimestamp } from './index.js';\n\nconst FORMAT_START_RE = /^Format:[\\s\\t]*/, STYLE_START_RE = /^Style:[\\s\\t]*/, DIALOGUE_START_RE = /^Dialogue:[\\s\\t]*/, FORMAT_SPLIT_RE = /[\\s\\t]*,[\\s\\t]*/, STYLE_FUNCTION_RE = /\\{[^}]+\\}/g, NEW_LINE_RE = /\\\\N/g, STYLES_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Styles\\]$/, EVENTS_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Events\\]$/;\nclass SSAParser {\n  h;\n  O = 0;\n  c = null;\n  l = [];\n  m = [];\n  N = null;\n  f;\n  P = {};\n  async init(init) {\n    this.h = init;\n    if (init.errors)\n      this.f = (await import('./errors.js')).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (this.O) {\n      switch (this.O) {\n        case 1:\n          if (line === \"\") {\n            this.O = 0;\n          } else if (STYLE_START_RE.test(line)) {\n            if (this.N) {\n              const styles = line.replace(STYLE_START_RE, \"\").split(FORMAT_SPLIT_RE);\n              this.S(styles);\n            } else {\n              this.g(this.f?.T(\"Style\", lineCount));\n            }\n          } else if (FORMAT_START_RE.test(line)) {\n            this.N = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this.N = null;\n            this.O = 2;\n          }\n          break;\n        case 2:\n          if (line === \"\") {\n            this.Q();\n          } else if (DIALOGUE_START_RE.test(line)) {\n            this.Q();\n            if (this.N) {\n              const dialogue = line.replace(DIALOGUE_START_RE, \"\").split(FORMAT_SPLIT_RE), cue = this.U(dialogue, lineCount);\n              if (cue)\n                this.c = cue;\n            } else {\n              this.g(this.f?.T(\"Dialogue\", lineCount));\n            }\n          } else if (this.c) {\n            this.c.text += \"\\n\" + line.replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n          } else if (FORMAT_START_RE.test(line)) {\n            this.N = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (STYLES_SECTION_START_RE.test(line)) {\n            this.N = null;\n            this.O = 1;\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this.N = null;\n          }\n      }\n    } else if (line === \"\") ; else if (STYLES_SECTION_START_RE.test(line)) {\n      this.N = null;\n      this.O = 1;\n    } else if (EVENTS_SECTION_START_RE.test(line)) {\n      this.N = null;\n      this.O = 2;\n    }\n  }\n  done() {\n    return {\n      metadata: {},\n      cues: this.l,\n      regions: [],\n      errors: this.m\n    };\n  }\n  Q() {\n    if (!this.c)\n      return;\n    this.l.push(this.c);\n    this.h.onCue?.(this.c);\n    this.c = null;\n  }\n  S(values) {\n    let name = \"Default\", styles = {}, outlineX, align = \"center\", vertical = \"bottom\", marginV, outlineY = 1.2, outlineColor, bgColor, borderStyle = 3, transform = [];\n    for (let i = 0; i < this.N.length; i++) {\n      const field = this.N[i], value = values[i];\n      switch (field) {\n        case \"Name\":\n          name = value;\n          break;\n        case \"Fontname\":\n          styles[\"font-family\"] = value;\n          break;\n        case \"Fontsize\":\n          styles[\"font-size\"] = `calc(${value} / var(--overlay-height))`;\n          break;\n        case \"PrimaryColour\":\n          const color = parseColor(value);\n          if (color)\n            styles[\"--cue-color\"] = color;\n          break;\n        case \"BorderStyle\":\n          borderStyle = parseInt(value, 10);\n          break;\n        case \"BackColour\":\n          bgColor = parseColor(value);\n          break;\n        case \"OutlineColour\":\n          const _outlineColor = parseColor(value);\n          if (_outlineColor)\n            outlineColor = _outlineColor;\n          break;\n        case \"Bold\":\n          if (parseInt(value))\n            styles[\"font-weight\"] = \"bold\";\n          break;\n        case \"Italic\":\n          if (parseInt(value))\n            styles[\"font-style\"] = \"italic\";\n          break;\n        case \"Underline\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"underline\";\n          break;\n        case \"StrikeOut\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"line-through\";\n          break;\n        case \"Spacing\":\n          styles[\"letter-spacing\"] = value + \"px\";\n          break;\n        case \"AlphaLevel\":\n          styles[\"opacity\"] = parseFloat(value);\n          break;\n        case \"ScaleX\":\n          transform.push(`scaleX(${parseFloat(value) / 100})`);\n          break;\n        case \"ScaleY\":\n          transform.push(`scaleY(${parseFloat(value) / 100})`);\n          break;\n        case \"Angle\":\n          transform.push(`rotate(${value}deg)`);\n          break;\n        case \"Shadow\":\n          outlineY = parseInt(value, 10) * 1.2;\n          break;\n        case \"MarginL\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-left\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginR\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-right\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginV\":\n          marginV = parseFloat(value);\n          break;\n        case \"Outline\":\n          outlineX = parseInt(value, 10);\n          break;\n        case \"Alignment\":\n          const alignment = parseInt(value, 10);\n          if (alignment >= 4)\n            vertical = alignment >= 7 ? \"top\" : \"center\";\n          switch (alignment % 3) {\n            case 1:\n              align = \"start\";\n              break;\n            case 2:\n              align = \"center\";\n              break;\n            case 3:\n              align = \"end\";\n              break;\n          }\n      }\n    }\n    styles.R = vertical;\n    styles[\"--cue-white-space\"] = \"normal\";\n    styles[\"--cue-line-height\"] = \"normal\";\n    styles[\"--cue-text-align\"] = align;\n    if (vertical === \"center\") {\n      styles[`--cue-top`] = \"50%\";\n      transform.push(\"translateY(-50%)\");\n    } else {\n      styles[`--cue-${vertical}`] = (marginV || 0) + \"px\";\n    }\n    if (borderStyle === 1) {\n      styles[\"--cue-padding-y\"] = \"0\";\n    }\n    if (borderStyle === 1 || bgColor) {\n      styles[\"--cue-bg-color\"] = borderStyle === 1 ? \"none\" : bgColor;\n    }\n    if (borderStyle === 3 && outlineColor) {\n      styles[\"--cue-outline\"] = `${outlineX}px solid ${outlineColor}`;\n    }\n    if (borderStyle === 1 && typeof outlineX === \"number\") {\n      const color = bgColor ?? \"#000\";\n      styles[\"--cue-text-shadow\"] = [\n        outlineColor && buildTextShadow(outlineX * 1.2, outlineY * 1.2, outlineColor),\n        outlineColor ? buildTextShadow(outlineX * (outlineX / 2), outlineY * (outlineX / 2), color) : buildTextShadow(outlineX, outlineY, color)\n      ].filter(Boolean).join(\", \");\n    }\n    if (transform.length)\n      styles[\"--cue-transform\"] = transform.join(\" \");\n    this.P[name] = styles;\n  }\n  U(values, lineCount) {\n    const fields = this.V(values);\n    const timestamp = this.q(fields.Start, fields.End, lineCount);\n    if (!timestamp)\n      return;\n    const cue = new VTTCue(timestamp[0], timestamp[1], \"\"), styles = { ...this.P[fields.Style] || {} }, voice = fields.Name ? `<v ${fields.Name}>` : \"\";\n    const vertical = styles.R, marginLeft = fields.MarginL && parseFloat(fields.MarginL), marginRight = fields.MarginR && parseFloat(fields.MarginR), marginV = fields.MarginV && parseFloat(fields.MarginV);\n    if (marginLeft) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-left\"] = marginLeft + \"px\";\n    }\n    if (marginRight) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-right\"] = marginRight + \"px\";\n    }\n    if (marginV && vertical !== \"center\") {\n      styles[`--cue-${vertical}`] = marginV + \"px\";\n    }\n    cue.text = voice + values.slice(this.N.length - 1).join(\", \").replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n    delete styles.R;\n    if (Object.keys(styles).length)\n      cue.style = styles;\n    return cue;\n  }\n  V(values) {\n    const fields = {};\n    for (let i = 0; i < this.N.length; i++) {\n      fields[this.N[i]] = values[i];\n    }\n    return fields;\n  }\n  q(startTimeText, endTimeText, lineCount) {\n    const startTime = parseVTTTimestamp(startTimeText), endTime = parseVTTTimestamp(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime];\n    } else {\n      if (startTime === null) {\n        this.g(this.f?.s(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this.g(this.f?.t(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this.g(this.f?.u(startTime, endTime, lineCount));\n      }\n    }\n  }\n  g(error) {\n    if (!error)\n      return;\n    this.m.push(error);\n    if (this.h.strict) {\n      this.h.cancel();\n      throw error;\n    } else {\n      this.h.onError?.(error);\n    }\n  }\n}\nfunction parseColor(color) {\n  const abgr = parseInt(color.replace(\"&H\", \"\"), 16);\n  if (abgr >= 0) {\n    const a = abgr >> 24 & 255 ^ 255;\n    const alpha = a / 255;\n    const b = abgr >> 16 & 255;\n    const g = abgr >> 8 & 255;\n    const r = abgr & 255;\n    return \"rgba(\" + [r, g, b, alpha].join(\",\") + \")\";\n  }\n  return null;\n}\nfunction buildTextShadow(x, y, color) {\n  const noOfShadows = Math.ceil(2 * Math.PI * x);\n  let textShadow = \"\";\n  for (let i = 0; i < noOfShadows; i++) {\n    const theta = 2 * Math.PI * i / noOfShadows;\n    textShadow += x * Math.cos(theta) + \"px \" + y * Math.sin(theta) + \"px 0 \" + color + (i == noOfShadows - 1 ? \"\" : \",\");\n  }\n  return textShadow;\n}\nfunction createSSAParser() {\n  return new SSAParser();\n}\n\nexport { SSAParser, createSSAParser as default };\n"],"file":"assets/ssa-parser-Bw0v_vv6.js"}