const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vidstack-7jdJQx_M-DVVVykAo.js","assets/index-DF45R1ZS.js","assets/vendor-CSMGp4Xa.js","assets/lodash-Cpj98o6Y.js","assets/index-OT_xj2dc.css"])))=>i.map(i=>d[i]);
import{l as d,I as g,y as p,z as u,c as C,x as m,_ as h,h as f}from"./index-DF45R1ZS.js";import"./vendor-CSMGp4Xa.js";import"./lodash-Cpj98o6Y.js";function w(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function E(){return!!window.cast?.framework}function v(){return!!window.chrome?.cast?.isAvailable}function c(){return s().getCastState()===cast.framework.CastState.CONNECTED}function s(){return window.cast.framework.CastContext.getInstance()}function l(){return s().getCurrentSession()}function y(){return l()?.getSessionObj().media[0]}function O(r){return y()?.media.contentId===r?.src}function _(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function S(r){return`Google Cast Error Code: ${r}`}function R(r,e){return d(s(),r,e)}class I{name="google-cast";target;#e;get cast(){return s()}mediaType(){return"video"}canPlay(e){return g&&!p&&u(e)}async prompt(e){let t,a,o;try{t=await this.#r(e),this.#e||(this.#e=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.#e)),a=e.player.createEvent("google-cast-prompt-open",{trigger:t}),e.player.dispatchEvent(a),this.#t(e,"connecting",a),await this.#o(C(e.$props.googleCast)),e.$state.remotePlaybackInfo.set({deviceName:l()?.getCastDevice().friendlyName}),c()&&this.#t(e,"connected",a)}catch(n){const i=n instanceof Error?n:this.#a((n+"").toUpperCase(),"Prompt failed.");throw o=e.player.createEvent("google-cast-prompt-error",{detail:i,trigger:a??t,cancelable:!0}),e.player.dispatch(o),this.#t(e,c()?"connected":"disconnected",o),i}finally{e.player.dispatch("google-cast-prompt-close",{trigger:o??a??t})}}async load(e){if(m)throw Error("[vidstack] can not load google cast provider server-side");if(!this.#e)throw Error("[vidstack] google cast player was not initialized");return new(await h(async()=>{const{GoogleCastProvider:t}=await import("./vidstack-7jdJQx_M-DVVVykAo.js");return{GoogleCastProvider:t}},__vite__mapDeps([0,1,2,3,4]))).GoogleCastProvider(this.#e,e)}async#r(e){if(E())return;const t=e.player.createEvent("google-cast-load-start");e.player.dispatch(t),await f(w()),await customElements.whenDefined("google-cast-launcher");const a=e.player.createEvent("google-cast-loaded",{trigger:t});if(e.player.dispatch(a),!v())throw this.#a("CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return a}async#o(e){this.#s(e);const t=await this.cast.requestSession();if(t)throw this.#a(t.toUpperCase(),S(t))}#s(e){this.cast?.setOptions({..._(),...e})}#t(e,t,a){const o={type:"google-cast",state:t};e.notify("remote-playback-change",o,a)}#a(e,t){const a=Error(t);return a.code=e,a}}var b=Object.freeze({__proto__:null,GoogleCastLoader:I});export{s as getCastContext,S as getCastErrorMessage,l as getCastSession,y as getCastSessionMedia,O as hasActiveCastSession,R as listenCastContextEvent,b as loader};
